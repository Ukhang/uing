<h2 className="text-lg">Installation</h2>

<h4 className="mt-4">Install the following dependencies:</h4>
<div className="rounded-md border mt-4">
  <div className="border-b bg-[#FCFCFC] dark:bg-[#212121] rounded-t-md px-4 py-2 text-sm flex justify-between gap-4">
    Terminal
  </div>
  <pre className="p-4 bg-[#ffffff] dark:bg-[#1C1C1B] rounded-b-md">
    ```bash 
    pnpm i framer-motion 
    ```
  </pre>
</div>
<div className="rounded-md border mt-4">
  <div className="border-b bg-[#FCFCFC] dark:bg-[#212121] rounded-t-md px-4 py-2 text-sm">
    Terminal
  </div>
  <pre className="p-4 bg-[#ffffff] dark:bg-[#1C1C1B] rounded-b-md">
    ```bash
    pnpm add @radix-ui/react-slot
    ```
  </pre>
</div>

<h4 className="mt-4">Copy and paste the following code into your project.</h4>
<div className="rounded-md border mt-4">
  <div className="border-b bg-[#FCFCFC] dark:bg-[#212121] rounded-t-md px-4 py-2 text-sm">
    animation-utils.tsx
  </div>
  <pre className="p-4 bg-[#ffffff] dark:bg-[#1C1C1B] rounded-b-md overflow-x-auto">
    ```tsx
    import { Variants } from 'framer-motion';

    export const quickSpringTransition = {
      type: 'spring',
      stiffness: 800,
      damping: 20,
      mass: 0.3,
    };

    export const calculateMagneticPosition = (
      e: React.MouseEvent,
      ref: React.RefObject<HTMLButtonElement | null>,
      strength: number = 25
    ) => {
      if (!ref.current) return { x: 0, y: 0 };
      
      const { clientX, clientY } = e;
      const { left, top, width, height } = ref.current.getBoundingClientRect();
      
      const centerX = left + width / 2;
      const centerY = top + height / 2;
      
      const distanceX = clientX - centerX;
      const distanceY = clientY - centerY;
      
      return {
        x: (distanceX / width) * strength,
        y: (distanceY / height) * strength,
      };
    };
    ```
  </pre>
</div>
<div className="rounded-md border mt-4">
  <div className="border-b bg-[#FCFCFC] dark:bg-[#212121] rounded-t-md px-4 py-2 text-sm">
    magnetic-button.tsx
  </div>
  <pre className="p-4 bg-[#ffffff] dark:bg-[#1C1C1B] rounded-b-md overflow-x-auto">
    ```tsx
    "use client";

    import * as React from "react"
    import { Slot } from "@radix-ui/react-slot"
    import { cva, type VariantProps } from "class-variance-authority"
    import { motion, HTMLMotionProps } from "framer-motion"

    import { cn } from "@/lib/utils"
    import { calculateMagneticPosition, quickSpringTransition } from "@/lib/animation-utils"

    const buttonVariants = cva(
      "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
      {
        variants: {
          variant: {
            default: "bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",
            destructive: "bg-destructive text-white shadow-xs hover:bg-destructive/90",
            outline: "border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",
            secondary: "bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",
            ghost: "hover:bg-accent hover:text-accent-foreground",
            link: "text-primary underline-offset-4 hover:underline",
          },
          size: {
            default: "h-9 px-4 py-2 has-[>svg]:px-3",
            sm: "h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",
            lg: "h-10 rounded-md px-6 has-[>svg]:px-4",
            icon: "size-9",
          },
        },
        defaultVariants: {
          variant: "default",
          size: "default",
        },
      }
    )

    type BaseProps = React.ComponentPropsWithoutRef<"button"> &
      VariantProps<typeof buttonVariants> & {
        asChild?: boolean
        magnetic?: boolean
        magneticStrength?: number
      }

    type MotionButtonProps = HTMLMotionProps<"button"> & BaseProps

    function Button({
      className,
      variant,
      size,
      asChild = false,
      magnetic = false,
      magneticStrength = 20,
      ...props
    }: MotionButtonProps) {
      const buttonRef = React.useRef<HTMLButtonElement | null>(null)
      const [magneticPosition, setMagneticPosition] = React.useState({ x: 0, y: 0 })

      const handleMouseMove = (e: React.MouseEvent<HTMLButtonElement>) => {
        if (!magnetic) return
        const position = calculateMagneticPosition(e, buttonRef, magneticStrength)
        setMagneticPosition(position)
      }

      const handleMouseLeave = () => {
        if (!magnetic) return
        setMagneticPosition({ x: 0, y: 0 })
      }

      const classes = cn(buttonVariants({ variant, size, className }))

      if (asChild) {
        return (
          <Slot className={classes} {...props} />
        )
      }

      if (magnetic) {
        return (
          <motion.button
            ref={buttonRef}
            className={classes}
            animate={magneticPosition}
            transition={quickSpringTransition}
            whileHover={{ scale: 1.05 }}
            whileTap={{ scale: 0.98 }}
            onMouseMove={handleMouseMove}
            onMouseLeave={handleMouseLeave}
            {...props}
          />
        )
      }

      return (
        <button
          ref={buttonRef}
          className={classes}
          {...props}
        />
      )
    }

    export { Button, buttonVariants }
    ```
  </pre>
</div>